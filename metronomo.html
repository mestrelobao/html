<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Metrônomo Online</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #111;
        color: #fff;
        text-align: center;
        padding: 40px;
    }

    h1 {
        margin-bottom: 30px;
    }

    .container {
        background: #222;
        padding: 30px;
        border-radius: 15px;
        display: inline-block;
        box-shadow: 0 0 20px rgba(0,0,0,0.6);
    }

    input[type=range] {
        width: 300px;
    }

    .bpm-display {
        font-size: 48px;
        margin: 20px 0;
    }

    button {
        padding: 12px 25px;
        margin: 10px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 18px;
    }

    .start {
        background: #28a745;
        color: white;
    }

    .stop {
        background: #dc3545;
        color: white;
    }
</style>
</head>

<body>

<h1>Metrônomo Online</h1>

<div class="container">
    <div class="bpm-display" id="bpmDisplay">120 BPM</div>

    <input type="range" id="bpmSlider" min="30" max="240" value="120">

    <br><br>

    <button class="start" id="startBtn">Iniciar</button>
    <button class="stop" id="stopBtn">Parar</button>
</div>

<script>
let bpm = 120;
let intervalId = null;
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

const bpmSlider = document.getElementById("bpmSlider");
const bpmDisplay = document.getElementById("bpmDisplay");
const startBtn = document.getElementById("startBtn");
const stopBtn = document.getElementById("stopBtn");

bpmSlider.oninput = () => {
    bpm = bpmSlider.value;
    bpmDisplay.textContent = bpm + " BPM";
};

function playClick() {
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();

    osc.type = "square";
    osc.frequency.value = 1000; 
    gain.gain.value = 0.2;

    osc.connect(gain);
    gain.connect(audioCtx.destination);

    osc.start();
    osc.stop(audioCtx.currentTime + 0.05);
}

startBtn.onclick = () => {
    if (intervalId) return;
    playClick();
    intervalId = setInterval(playClick, 60000 / bpm);
};

stopBtn.onclick = () => {
    clearInterval(intervalId);
    intervalId = null;
};
</script>

</body>
</html>
